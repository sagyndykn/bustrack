<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BusTrack –ê–ª–º–∞—Ç—ã</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Syne:wght@700;800&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

  <header>
    <div class="logo">
      <div>BusTrack<span class="logo-sub">–ê–ª–º–∞—Ç—ã</span></div>
    </div>
    <div class="hdr-right">
      <div id="user-chip"></div>
      <button class="logout-btn" id="lout" onclick="logout()">–í—ã–π—Ç–∏</button>
    </div>
  </header>

  <div class="layout">
    <div class="sidebar">
      <div class="nav">
        <button class="nav-btn active" onclick="showPanel('login')">–í—Ö–æ–¥</button>
        <button class="nav-btn" onclick="showPanel('buses')">–ê–≤—Ç–æ–±—É—Å—ã</button>
        <button class="nav-btn" onclick="showPanel('stops')">–û—Å—Ç–∞–Ω–æ–≤–∫–∏</button>
        <!-- ‚Üì —Ç–æ–ª—å–∫–æ –¥–ª—è admin ‚Üì -->
        <button class="nav-btn" id="nav-audit" style="display:none" onclick="showPanel('audit')">–ê—É–¥–∏—Ç</button>
        <button class="nav-btn" id="nav-analytics" style="display:none" onclick="showPanel('analytics')">H3
          –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
      </div>

      <!-- LOGIN -->
      <div class="panel active" id="panel-login">
        <div class="panel-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</div>
        <div class="panel-body">
          <div class="login-card">
            <h3>–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</h3>
            <div><label>–õ–æ–≥–∏–Ω</label><input id="iu" placeholder="admin" /></div>
            <div><label>–ü–∞—Ä–æ–ª—å</label><input id="ip" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                onkeydown="if(event.key==='Enter')login()" /></div>
            <div id="lerr" class="err"></div>
            <button class="btn btn-blue" onclick="login()">–í–æ–π—Ç–∏ ‚Üí</button>
          </div>
          <div class="sec-lbl">–ë—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥</div>
          <div class="quick-grid">
            <button class="qb qb1" onclick="ql('admin','admin123')">Admin</button>
            <button class="qb qb2" onclick="ql('user1','user123')">User</button>
          </div>
        </div>
      </div>

      <!-- BUSES -->
      <div class="panel" id="panel-buses">
        <div class="panel-title">üöå <span>–ê–≤—Ç–æ–±—É—Å—ã</span></div>
        <div class="panel-body">
          <div class="add-form" id="bus-form" style="display:none">
            <h4>‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–±—É—Å</h4>
            <input id="b-plate" placeholder="–ù–æ–º–µ—Ä (010 ABC 01)" />
            <input id="b-model" placeholder="–ú–æ–¥–µ–ª—å (Yutong ZK6180)" />
            <input id="b-cap" placeholder="–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å" type="number" />
            <input id="b-lat" placeholder="–®–∏—Ä–æ—Ç–∞ (43.25...)" type="number" step="any" />
            <input id="b-lng" placeholder="–î–æ–ª–≥–æ—Ç–∞ (76.94...)" type="number" step="any" />
            <button class="btn" style="background:#f0fdfa;color:#0d9488;border:2px solid #99f6e4;font-size:12px"
              onclick="pickCoords('bus')">üìç –í—ã–±—Ä–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ</button>
            <button class="btn btn-blue" onclick="addBus()">–î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
          <div id="buses-list">
            <div class="no-data">–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ</div>
          </div>
        </div>
      </div>

      <!-- STOPS -->
      <div class="panel" id="panel-stops">
        <div class="panel-title">üìç <span>–û—Å—Ç–∞–Ω–æ–≤–∫–∏</span></div>
        <div class="panel-body">
          <div class="add-form" id="stop-form" style="display:none">
            <h4>‚ûï –î–æ–±–∞–≤–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–∫—É</h4>
            <input id="s-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" />
            <input id="s-addr" placeholder="–ê–¥—Ä–µ—Å" />
            <input id="s-lat" placeholder="–®–∏—Ä–æ—Ç–∞ (43.25...)" type="number" step="any" />
            <input id="s-lng" placeholder="–î–æ–ª–≥–æ—Ç–∞ (76.94...)" type="number" step="any" />
            <button class="btn" style="background:#f0fdfa;color:#0d9488;border:2px solid #99f6e4;font-size:12px"
              onclick="pickCoords('stop')">üìç –í—ã–±—Ä–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ</button>
            <button class="btn btn-blue" onclick="addStop()">–î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
          <div id="stops-list">
            <div class="no-data">–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ</div>
          </div>
        </div>
        <div id="nearby-panel">
          <div class="nearby-title">–ë–ª–∏–∂–∞–π—à–∏–µ –∞–≤—Ç–æ–±—É—Å—ã (H3)</div>
          <div id="nmeta" class="nearby-meta"></div>
          <div id="nlist"></div>
        </div>
      </div>

      <!-- AUDIT (—Ç–æ–ª—å–∫–æ admin) -->
      <div class="panel" id="panel-audit">
        <div class="panel-title"><span>–ê—É–¥–∏—Ç –ª–æ–≥</span></div>
        <div class="panel-body" id="audit-list">
          <div class="no-data">–¢–æ–ª—å–∫–æ –¥–ª—è admin</div>
        </div>
      </div>

      <!-- ANALYTICS (—Ç–æ–ª—å–∫–æ admin) -->
      <div class="panel" id="panel-analytics">
        <div class="panel-title"><span>H3 –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span></div>
        <div class="panel-body">
          <button class="btn btn-blue" onclick="refreshAnalytics()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
          <div id="analytics-list">
            <div class="no-data">–ù–∞–∂–º–∏—Ç–µ ¬´–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ¬ª</div>
          </div>
        </div>
      </div>

    </div><!-- /sidebar -->

    <div id="map"></div>
  </div>

  <div id="toast"></div>

  <script src="/script.js"></script>
</body>

</html>